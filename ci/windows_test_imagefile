ARG CI_IMAGE_NAME_TAG
FROM ${CI_IMAGE_NAME_TAG}

RUN powershell -NoLogo -NoProfile -Command \
    choco feature disable -n=usePackageExitCodes ; \
    choco install --yes --no-progress ccache --version=4.7.4

RUN powershell -NoLogo -NoProfile -Command \
    Get-Command -Name "ccache"

RUN powershell -NoLogo -NoProfile -Command \
    choco feature disable -n=usePackageExitCodes ; \
    choco install --yes --no-progress python3 --version=3.9.6

RUN powershell -NoLogo -NoProfile -Command \
    Get-Command -Name "python"

# RUN powershell -NoLogo -NoProfile -Command \
#     $env:PATH

# RUN powershell -NoLogo -NoProfile -Command \
#     refreshenv

# RUN powershell -NoLogo -NoProfile -Command \
#     $env:PATH

RUN powershell -NoLogo -NoProfile -Command \
    pip install zmq

RUN powershell -NoLogo -NoProfile -Command \
    Get-Command -Name "git"
